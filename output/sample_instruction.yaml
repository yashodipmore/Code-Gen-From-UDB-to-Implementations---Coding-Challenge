$schema: "inst_schema.json#"
kind: instruction
name: add
long_name: Add
description: |
  The ADD instruction performs addition of two register values.
  It adds the contents of registers rs1 and rs2 and stores the result in rd.
  
  This is a basic arithmetic instruction that does not check for overflow.
definedBy: I
assembly: xd, xs1, xs2
encoding:
  match: 0000000----------000-----0110011
  variables:
    - name: xs2
      location: 24-20
    - name: xs1
      location: 19-15
    - name: xd
      location: 11-7
access:
  s: always
  u: always
  vs: always
  vu: always
data_independent_timing: true
operation(): |
  XReg src1 = X[xs1];
  XReg src2 = X[xs2];
  X[xd] = src1 + src2;
sail(): |
  {
    let rs1_val = X(rs1);
    let rs2_val = X(rs2);
    X(rd) = rs1_val + rs2_val;
    RETIRE_SUCCESS
  }
